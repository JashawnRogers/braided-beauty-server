<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="en"
      th:replace="email/_layout :: layout(~{::content})">

<div th:fragment="content">

    <h3 style="margin:0 0 12px 0; font-size:18px;">Final Payment Received</h3>

    <p style="margin:0 0 12px 0;">
        Hi <strong th:text="${customerName}">Customer</strong>,
    </p>

    <p style="margin:0 0 16px 0;">
        Thanks again — here’s your receipt for
        <strong th:text="${#temporals.format(appointmentDateTime, 'MMM d, yyyy h:mm a')}">Jan 31, 2026 2:00 PM</strong>.
    </p>

    <!-- Line items -->
    <table width="100%" cellpadding="0" cellspacing="0" border="0"
           style="width:100%; border-collapse:collapse; margin-top:12px;">
        <tr>
            <th align="left" style="padding:8px 0; font-size:13px; border-bottom:1px solid #eee;">
                Item
            </th>
            <th align="right" style="padding:8px 0; font-size:13px; border-bottom:1px solid #eee;">
                Amount
            </th>
        </tr>

        <!-- Service -->
        <tr>
            <td style="padding:8px 0; font-size:14px;">
                <strong th:text="${serviceName}">Service</strong>
            </td>
            <td align="right" style="padding:8px 0; font-size:14px;">
                <span th:text="${'$' + #numbers.formatDecimal(serviceAmount, 1, 'COMMA', 2, 'POINT')}">$0.00</span>
            </td>
        </tr>

        <!-- Add-ons -->
        <tr th:each="a : ${addOns}" th:if="${addOns != null and !#lists.isEmpty(addOns)}">
            <td style="padding:6px 0; font-size:14px; color:#333;">
                + <span th:text="${a.name}">Add-on</span>
            </td>
            <td align="right" style="padding:6px 0; font-size:14px; color:#333;">
                <span th:text="${'$' + #numbers.formatDecimal(a.price, 1, 'COMMA', 2, 'POINT')}">$0.00</span>
            </td>
        </tr>

        <!-- Divider -->
        <tr>
            <td colspan="2" style="padding-top:10px; border-top:1px solid #eee;"></td>
        </tr>

        <!-- Summary rows -->
        <tr>
            <td style="padding:6px 0; font-size:14px;">Subtotal</td>
            <td align="right" style="padding:6px 0; font-size:14px;">
                <span th:text="${'$' + #numbers.formatDecimal(subtotal, 1, 'COMMA', 2, 'POINT')}">$0.00</span>
            </td>
        </tr>

        <tr th:if="${discountAmount != null and discountAmount.signum() != 0}">
            <td style="padding:6px 0; font-size:14px;">
                Discount
                <span th:if="${discountPercent != null and discountPercent != 0}"
                      th:text="${' (' + discountPercent + '%)'}"
                      style="color:#777; font-size:13px;">
                    (0%)
                </span>
            </td>
            <td align="right" style="padding:6px 0; font-size:14px;">
                -<span th:text="${'$' + #numbers.formatDecimal(discountAmount, 1, 'COMMA', 2, 'POINT')}">$0.00</span>
            </td>
        </tr>

        <tr th:if="${depositAmount != null and depositAmount.signum() != 0}">
            <td style="padding:6px 0; font-size:14px;">Deposit paid earlier</td>
            <td align="right" style="padding:6px 0; font-size:14px;">
                -<span th:text="${'$' + #numbers.formatDecimal(depositAmount, 1, 'COMMA', 2, 'POINT')}">$0.00</span>
            </td>
        </tr>

        <tr th:if="${tipAmount != null and tipAmount.signum() != 0}">
            <td style="padding:6px 0; font-size:14px;">Tip</td>
            <td align="right" style="padding:6px 0; font-size:14px;">
                <span th:text="${'$' + #numbers.formatDecimal(tipAmount, 1, 'COMMA', 2, 'POINT')}">$0.00</span>
            </td>
        </tr>

        <!-- Charged today -->
        <tr>
            <td style="padding:10px 0 6px 0; font-size:15px;">
                <strong>Charged today</strong>
            </td>
            <td align="right" style="padding:10px 0 6px 0; font-size:15px;">
                <strong th:text="${'$' + #numbers.formatDecimal(chargedToday, 1, 'COMMA', 2, 'POINT')}">$0.00</strong>
            </td>
        </tr>

        <!-- Total paid -->
        <tr>
            <td style="padding:6px 0; font-size:14px; color:#555;">
                Total paid (deposit + today)
            </td>
            <td align="right" style="padding:6px 0; font-size:14px; color:#555;">
                <span th:text="${'$' + #numbers.formatDecimal(totalPaid, 1, 'COMMA', 2, 'POINT')}">$0.00</span>
            </td>
        </tr>
    </table>

</div>
</html>